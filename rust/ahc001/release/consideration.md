# AHC001 AtCoder Ad

## 制約

10^4 \times 10^4
50 <= n <= 200
0 <= x_i, y_i <= 9999
\sum_i r_i = 10^4 \times 10^4

## 考察

1. (x_i+0.5, y_i+0.5)を取るのは必須
   1. 点を確実に入れるために
   1. 点の重複は考慮しなくて良い。(制約から)
1. 取得した後、拡大していく戦略を取るのがよいはず
   1. いくつか捨てるのが効率的か考慮する必要がある
   1. 順番に乱択を加えることで、改善できそう
   1. 拡大の方向に乱択を加えることで、改善できそう
1. 長方形の管理方法
   1. 解答と同じが基本でいいと思う
      1. (a,b,c,d) -> ((a,b),(a,d),(c,b),(c,d))
1. 重複しないために
   1. 毎回自分以外を全探索が妥当だと思う。制約的に厳しくないし
      1. 重複確認関数を要したほうが良さそう
1. 長方形の縦横の長さ
   1. 求める面積を実現するもの
   1. 求める面積より小さいもののうち最大のもの
   1. 求める面積より大きいもののうち最小のもの
   1. どっちにしろ、面積は常に小さめに取ったほうがいい気がする
1. 戦略a
   1. 長方形の縦横を決め打つ
1. 戦略b
   1. 何かしらを適当に作る??
      1. 縦横を順番に1ずつ伸ばせるか判定していく
         1. 最大を超えないように
         1. 縦横4方向O(10^3*2*4*n)
1. 面積に対する考察
   1. 10^8/200 = 5*10^5 < (1つあたりの面積) < 2*10^6 = 10^8/50
   1. 707.1 = 5\sqrt(2)*10^2 < (1つあたりの辺の長さ) < \sqrt(2)*10^3 = 1414.2
   1. ということで大体10^3だと思っていい

## とりあえず次にやろうと思っていること

- [ ] 
- [ ] 焼きなましの収束速度を見てみて、時間によって初期状態をあれこれ変えてみるのが良さそう。
- [x] 図形を縮めて焼き鈍していくのが良さそう
  - [x] 平行移動は吸収できる気がする
  - [x] ランダムにたまには大きめに削れると良さそう。
  - [x] 熱方程式のやつ
- [ ] 拡大の仕方も変更したい
  - [ ] 結局ここを工夫する必要がある?
    - [ ] 並び替えを左上からにして、右下にのばしていくとか?
  - [ ] ビジュライザーで見ると、貪欲部分の実装がうまく言っていなかったので、修正する
    - 違った面積の制限があるんだった
    - 外向きに荷重をかける実装+外側から埋めていくみたいな?
- [x] とりあえず並び替えまくってみる
- [x] ビジュライザーを元にスコアを計算できるようにする
  - [x] ビジュアライザーを元に今のを書き直したほうが楽かも
    - [x] Rect生成

## 焼きなまし

### 解析

- 左と右に10ずつランダムに
  - 9200351581
- 左と右に20ずつランダムに
  - 9215690804
- 左と右に50ずつランダムに
  - 9220360965
- 左と右に100ずつランダムに
  - 9172254539
- T0=1000, T1=1
  - 9121646077
- T0=1000, T1=10
  - 9187898315
- T0=100, T1=10
  - 9205714293
  - 9202705773
- T0=100, T1=1
  - 9113910311
  - 9108650302
- T0=100, T1=20
  - 9177858385
- T0=50, T1=20
  - 9238240348
- T0=70, T1=20
  - 9240155671
- T0=80, T1=20
  - 9220210890
- T0=80, T1=30
  - 9198018294
- T0=70, T1=30
  - 9202733694
- T0=60, T1=20
  - 9233859532
- T0=60, T1=40
  - 9220223562
- T0=60, T1=60
  - 9222143193
  - 9208520706
- T0=50, T1=50
  - 9226125956
- T0=40, T1=40
  - 9234852582
- T0=30, T1=30
  - 9230219801
- T0=37, T1=37
  - 9245059878
  - 9233264077
- T0=40, T1=30
  - 9243733288
  - 9242119757
- T0=45, T1=35
  - 9192700300
  - 9216510750
- T0=40, T1=20
  - 9212345322
  - 9216539466
- T0=50, T1=30
  - 9244432019
- T0=50, T1=37
  - 9246750811
  - 9225887506
- T0=50, T1=35
  - 9215864015
- T0=60, T1=30
  - 9212190010
- T0=50, T1=30, S0=10, S1=1
  - 9308111409
- T0=50, T1=35, S0=10, S1=1
  - 9323509116
- T0=50, T1=35, S0=5, S1=1
  - 9321555860
- T0=50, T1=20, S0=10, S1=1
  - 9305755937
- T0=50, T1=35, S0=100, S1=1
  - 9294095154
  
### random indices

- T0=50, T1=35, S0=100, S1=1
  - 9279877100
  - 9290820658
- T0=50, T1=35, S0=10, S1=1
  - 9318537620
- T0=50, T1=35, S0=10, S1=5
  - 9319109880
- T0=50, T1=35, S0=5, S1=1
  - 9305920535










### 考察

- loop回数
  - exp 1602
  - 変えず 1608
- 更新頻度
  - 1285 new!
  - 1322 new!
  - 1344 new!
  - 1362 new!
  - 1407 new!
  - 1427 new!
  - 1449 new!
  - 1483 new!
  - 1511 new!
  - 1563 
- T0=50, T3=30で10秒回してみる
  - 9380348088
  - ちなみに通常は、TL=4.9でやってる
- descendingを消してみる
  - 9256761818
  - 1769 loop
- 初期状態を適当にしてみた
  - 9116848116
- descendingのみにしてみる
  - これまでは、ascendingのみ
  - 8950034580
  - 参考、ascendingのみ
    - 9282744235
    - 9299881268

  



  







## bug修正

### 重複の排除ができていない

2
0 0 100000000
0 1 100000000
0 0 10000 1
0 1 10000 10000

2
0 0 100000000
1 1 100000000
0 0 10000 1
0 1 10000 10000

3
0 0 100000000
1 1 100000000
2 0 100000000
0 0 2 10000
0 0 2 10000
2 0 10000 10000




## script

cargo run --bin a < ../tools/in/0000.txt > 0000.txt 
cargo run --release --bin vis in/0000.txt ../release/0000.txt 
